<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <style type="text/css" media="all">
       .blank_row
        {
            height: 30px; /* Overwrite any previous rules */
            background-color: #FFFFFF;
        } 
        .image { 
           float: left;
           text-align:center;
           width: 80px;
           margin-right:10px;
        }

        span { 
           color: black; 
           font: bold 20px Helvetica, Sans-Serif; 
        }
    </style>
    <title>Diputados</title>

    <script type="text/javascript" charset="utf-8">
data = [{titulo: "hola eduardo", votos: {favor: {pan: 88.9}, quorum: {pri:40.50}}},
{titulo: "adios eduardo", votos: {contra: {pan: 88.9}, ausente: {pri:40.50}}}
     
     ];

        function createPartyNodes(party_json){
            var $nodes = $();
            for (var k in party_json){
                if (party_json.hasOwnProperty(k)) {
                    var imagen_p = $("#imagen_p").clone();
                    $(imagen_p).children("img").attr("src", k+".png");
                    $(imagen_p).children("img").attr("alt", k.toUpperCase());
                    $(imagen_p).children("span").html(party_json[k]);
                    $(imagen_p).removeAttr("id");
                    $(imagen_p).removeAttr("style");
                    $nodes = $nodes.add(imagen_p);
                }
            }

        
            return $nodes;
        }

        $(function() {
            var arrayLength = data.length;

            for (var i = 0; i < arrayLength; i++) {
                var titulo_tr = $("#titulo_tr").clone();
                $(titulo_tr).children("td").html(data[i]["titulo"]);
                $(titulo_tr).removeAttr("id");
                $('#table > tbody:last').append(titulo_tr);

                var header_tr = $("#header_tr").clone();
                $(header_tr).removeAttr("id");
                $('#table > tbody:last').append(header_tr);

                todos_nodes = createPartyNodes({pan: 85.9, pri: 30.3});
                $("#pruba").append(todos_nodes)
                
                var votos_tr = $("#votos_tr").clone();
                for (var tipo in data[i]["votos"]){
                    if (data[i]["votos"].hasOwnProperty(tipo)) {
                        partidos = data[i]["votos"][tipo];
                        $(votos_tr).children("#"+tipo).first().append(createPartyNodes(partidos));
                    }
                }
                $(votos_tr).removeAttr("id");
                $('#table > tbody:last').append(votos_tr);

                var blank_tr = $("#blank_tr").clone();
                $(blank_tr).removeAttr("id");
                $('#table > tbody:last').append(blank_tr);
            }

        });
    </script>
    
</head>
<body>
<table class="table" style="display:none">
      <tbody>
        <tr class="active" id="titulo_tr">
          <td colspan="5"></td>
        </tr>
        <tr id="header_tr">
          <td>Favor</td>
          <td>Contra</td>
          <td>Abstenci&oacute;n</td>
          <td>Qu&oacute;rum</td>
          <td>Ausente</td>
        </tr>
        <tr id="votos_tr">
            <td id="favor"></td>
            <td id="contra"></td>
            <td id="abstencion"></td>
            <td id="quorum"></td>
            <td id="ausente"></td>
        </tr>
        <tr class="blank_row" id="blank_tr"></tr>
      </tbody>
    </table>
    <p class="image" id="imagen_p" style="display:none">
        <img src="" alt=""/>
        <span></span>
    </p>
<table class="table" id="table">
      <tbody>
      </tbody>
</table>
</body>
</html>
